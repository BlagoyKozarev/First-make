# FirstMake Agent

**Local-first BoQ Processing and LP Optimization for Construction Offers**

[![.NET 8](https://img.shields.io/badge/.NET-8.0-512BD4)](https://dotnet.microsoft.com/)
[![React](https://img.shields.io/badge/React-18-61DAFB)](https://react.dev/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5-3178C6)](https://www.typescriptlang.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## ğŸ¯ Overview

FirstMake Agent Ğµ **desktop Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ** Ğ·Ğ° Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ½Ğ° ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²ĞµĞ½Ğ¾-ÑÑ‚Ğ¾Ğ¹Ğ½Ğ¾ÑÑ‚Ğ½Ğ¸ ÑĞ¼ĞµÑ‚ĞºĞ¸ (ĞšĞ¡Ğ¡) Ğ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ĞµĞ»Ğ½Ğ¸ Ğ¾Ñ„ĞµÑ€Ñ‚Ğ¸. Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ°Ñ‚Ğ° Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ»ÑĞ²Ğ° Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ¸Ñ€Ğ°Ğ½Ğ¾ Ğ¸Ğ·Ğ²Ğ»Ğ¸Ñ‡Ğ°Ğ½Ğµ, ÑÑŠĞ¿Ğ¾ÑÑ‚Ğ°Ğ²ÑĞ½Ğµ Ğ¸ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ğ´Ğ°Ğ½Ğ½Ğ¸ Ğ¾Ñ‚ Ñ€Ğ°Ğ·Ğ½Ğ¾Ñ€Ğ¾Ğ´Ğ½Ğ¸ Ğ¸Ğ·Ñ‚Ğ¾Ñ‡Ğ½Ğ¸Ñ†Ğ¸ (XLSX, DOCX, PDF, ÑĞºĞ°Ğ½Ğ¸Ñ€Ğ°Ğ½Ğ¸ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¸).

### ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¸ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»Ğ½Ğ¾ÑÑ‚Ğ¸

- ğŸ–¥ï¸ **Desktop App** - Electron wrapper Ñ auto-start Ğ½Ğ° backend
- ğŸ“„ **Ğ˜Ğ½Ñ‚ĞµĞ»Ğ¸Ğ³ĞµĞ½Ñ‚Ğ½Ğ¾ Ğ¿Ğ°Ñ€ÑĞ¸Ñ€Ğ°Ğ½Ğµ** - ĞŸĞ¾Ğ´Ğ´Ñ€ÑŠĞ¶ĞºĞ° Ğ½Ğ° XLSX, DOCX, PDF + OCR Ğ·Ğ° ÑĞºĞ°Ğ½Ğ¸Ñ€Ğ°Ğ½Ğ¸ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¸
- ğŸ” **Fuzzy matching** - ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ ÑÑŠĞ¿Ğ¾ÑÑ‚Ğ°Ğ²ÑĞ½Ğµ Ğ½Ğ° Ğ¿Ğ¾Ğ·Ğ¸Ñ†Ğ¸Ğ¸ Ñ Ñ†ĞµĞ½Ğ¾Ğ²Ğ¸ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³
- ğŸ“Š **LP Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ** - Google OR-Tools Ğ·Ğ° Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ°Ğ»Ğ½Ğ¾ Ñ†ĞµĞ½Ğ¾Ğ¾Ğ±Ñ€Ğ°Ğ·ÑƒĞ²Ğ°Ğ½Ğµ
- ğŸ“ˆ **ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ¸ Ñ‚ĞµĞ»ĞµĞ¼ĞµÑ‚Ñ€Ğ¸Ñ** - Real-time dashboard Ğ·Ğ° Ğ¿Ñ€Ğ¾ÑĞ»ĞµĞ´ÑĞ²Ğ°Ğ½Ğµ Ğ½Ğ° Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸
- ğŸ’¾ **Ğ›Ğ¾ĞºĞ°Ğ»Ğ½Ğ¾ ÑÑŠÑ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ** - SQLite Ğ±Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ğ¸, Ğ±ĞµĞ· cloud dependencies
- ğŸ¨ **ĞœĞ¾Ğ´ĞµÑ€ĞµĞ½ UI** - React Ñ Tailwind CSS Ğ¸ shadcn/ui ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸
- ğŸ“‘ **Excel ĞµĞºÑĞ¿Ğ¾Ñ€Ñ‚** - Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ°Ğ½Ğµ Ğ½Ğ° ĞšĞ¡Ğ¡ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²Ğµ Ñ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¸ Ğ¸ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ°Ğ½Ğµ
- ğŸ”” **System Tray** - Ğ¤Ğ¾Ğ½Ğ¾Ğ²Ğ¾ Ğ¸Ğ·Ğ¿ÑŠĞ»Ğ½ĞµĞ½Ğ¸Ğµ Ñ tray icon

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚â”€â”€â”€â”€â”€â–¶â”‚  React UI    â”‚â”€â”€â”€â”€â”€â–¶â”‚   API (5000)  â”‚
â”‚  (User)     â”‚      â”‚  (Vite 5174) â”‚      â”‚  (.NET 8 Web) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚                                           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ AiGateway   â”‚                           â”‚ Core.Engine    â”‚
              â”‚ (5001)      â”‚                           â”‚ (Class Lib)    â”‚
              â”‚             â”‚                           â”‚                â”‚
              â”‚ â€¢ PDF Parse â”‚                           â”‚ â€¢ LP Optimizer â”‚
              â”‚ â€¢ OCR       â”‚                           â”‚ â€¢ FuzzyMatcher â”‚
              â”‚ â€¢ LLM       â”‚                           â”‚ â€¢ Normalizers  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  External Services  â”‚
              â”‚                     â”‚
              â”‚ â€¢ BG GPT API        â”‚
              â”‚ â€¢ Tesseract OCR     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¸

#### Frontend (React + TypeScript)
- **Stack**: Vite, React 18, TypeScript, Tailwind CSS
- **Routing**: React Router v6
- **Components**: shadcn/ui (Card, Badge, Button)
- **State**: SessionStorage Ğ·Ğ° workflow Ğ´Ğ°Ğ½Ğ½Ğ¸
- **Pages**: Upload, Review, Optimize, Export, Metrics

#### Backend API (.NET 8 Minimal API)
- **Endpoints**: 10 REST JSON endpoints
- **Database**: SQLite Ñ EF Core 8
- **Services**: ExcelExportService (EPPlus), ObservationService
- **Middleware**: Error handling, request limits, timeouts
- **Validation**: Comprehensive input validation

#### AI Gateway (.NET 8 Minimal API)
- **Parsers**: iText7 (PDF), OpenXML (XLSX/DOCX)
- **OCR**: Tesseract wrapper (Bulgarian + English)
- **LLM**: BG GPT integration (api.raicommerce.net)

#### Core.Engine (.NET 8 Class Library)
- **LP Solver**: Google OR-Tools 9.11 (GLOP)
- **Fuzzy Matching**: Fastenshtein (Levenshtein distance)
- **Normalization**: Text Ğ¸ Unit normalizers
- **Models**: 11 DTOs Ğ·Ğ° Ñ‚Ğ¸Ğ¿Ğ¸Ğ·Ğ¸Ñ€Ğ°Ğ½ data flow

## ğŸš€ Quick Start

### Prerequisites

- .NET 8 SDK
- Node.js 20+
- SQLite3 (Ğ²Ğ³Ñ€Ğ°Ğ´ĞµĞ½ Ğ² .NET)

### Desktop App (Production)

```bash
# 1. Download installer from Releases
# Windows: FirstMake-Setup-2.0.0.exe
# Linux: FirstMake-2.0.0.AppImage or firstmake_2.0.0_amd64.deb

# 2. Install and run
# Backend ÑÑ‚Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğ° Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾
# App Ğ´Ğ¾ÑÑ‚ÑŠĞ¿ĞµĞ½ Ğ¾Ñ‚ System Tray
```

### Desktop App (Development)

```bash
# 1. Clone repository
git clone https://github.com/BlagoyKozarev/First-make.git
cd First-make

# 2. Install dependencies
dotnet restore
cd desktop && npm install
cd ../src/UI && npm install

# 3. Run in dev mode (auto-starts backend + frontend + Electron)
cd ../../desktop
./dev-start.sh  # Linux/Mac
# or
dev-start.bat   # Windows

# Or manually:
# Terminal 1 - Backend
cd src/Api && dotnet run --urls "http://localhost:5085"

# Terminal 2 - Frontend
cd src/UI && npm run dev

# Terminal 3 - Electron
cd desktop && NODE_ENV=development npm start
```

### Web Mode (Legacy)

```bash
# Start API manually
cd src/Api
dotnet run --urls "http://localhost:5085"

# Start UI
cd ../UI
npm run dev
# Open http://localhost:5173
```

### Using Docker Compose

```bash
# Start all services
docker-compose up -d

# View logs
docker-compose logs -f

# Stop services
docker-compose down
```

## ğŸ“– API Documentation

### Base URLs

- **API**: `http://localhost:5000`
- **AI Gateway**: `http://localhost:5001`
- **UI**: `http://localhost:5174`

### API Endpoints

#### Health Check
```http
GET /healthz
```

#### File Upload & Parsing
```http
POST /parse
Content-Type: multipart/form-data

# Response: Parsed file structure
```

#### BoQ Extraction
```http
POST /extract
Content-Type: application/json

{
  "parsedData": { ... }
}
```

#### Fuzzy Matching
```http
POST /match
Content-Type: application/json

{
  "boq": { "project": {...}, "stages": [...], "items": [...] },
  "priceBase": [...]
}

# Response: Matched items with scores
```

#### LP Optimization
```http
POST /optimize
Content-Type: application/json

{
  "matchedItems": [...],
  "stages": [...],
  "lambda": 1000.0,
  "minCoeff": 0.4,
  "maxCoeff": 2.0
}

# Response: Optimized coefficients and stage summaries
```

#### Export ĞšĞ¡Ğ¡
```http
POST /export
Content-Type: application/json

{
  "result": { ... },
  "boq": { ... },
  "projectName": "Project Name",
  "splitByStage": false
}

# Response: XLSX file or ZIP archive
```

#### Observations & Metrics
```http
# Log operation
POST /observations

# Get metrics
GET /observations/metrics?since=2025-10-13T00:00:00Z

# Get recent operations
GET /observations/recent?limit=100
```

### AI Gateway Endpoints

#### PDF Layout Analysis
```http
POST /pdf/layout
Content-Type: multipart/form-data

# Response: Text blocks with positions
```

#### XLSX Parsing
```http
POST /xlsx/parse
Content-Type: multipart/form-data

# Response: Sheets, rows, cells
```

#### DOCX Parsing
```http
POST /docx/parse
Content-Type: multipart/form-data

# Response: Paragraphs and tables
```

## âš™ï¸ Configuration

### API Settings (`src/Api/appsettings.json`)

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Data Source=firstmake.db"
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information"
    }
  }
}
```

### AI Gateway Settings (`src/AiGateway/appsettings.json`)

```json
{
  "BgGpt": {
    "BaseUrl": "https://api.raicommerce.net/v1",
    "ApiKey": "YOUR_API_KEY",
    "Model": "gpt-4o-mini",
    "Temperature": 0.0
  },
  "Tesseract": {
    "DataPath": "/usr/share/tesseract-ocr/5/tessdata",
    "Languages": "bul+eng"
  }
}
```

### Environment Variables

```bash
# API
export ASPNETCORE_URLS="http://localhost:5000"
export ConnectionStrings__DefaultConnection="Data Source=firstmake.db"

# AI Gateway
export BgGpt__ApiKey="your-api-key-here"

# UI
export VITE_API_URL="http://localhost:5000"
export VITE_AI_GATEWAY_URL="http://localhost:5001"
```

## ğŸ§ª Testing

### Run Unit Tests

```bash
# All tests
dotnet test

# With coverage
dotnet test --collect:"XPlat Code Coverage"

# Specific project
dotnet test tests/Core.Engine.Tests
```

### Current Test Results

- **Total Tests**: 26
- **Passing**: 26 (100%)
- **Coverage**: Core business logic
- **Runtime**: ~128ms

## ğŸ“Š Database Schema

### Tables

#### CachedMatch
```sql
CREATE TABLE CachedMatches (
    Id INTEGER PRIMARY KEY,
    BoqItemName TEXT NOT NULL,
    Unit TEXT NOT NULL,
    CandidatesJson TEXT NOT NULL,
    CreatedAt DATETIME NOT NULL,
    ExpiresAt DATETIME
);
CREATE INDEX IX_CachedMatch_BoqItemName_Unit ON CachedMatches(BoqItemName, Unit);
CREATE INDEX IX_CachedMatch_CreatedAt ON CachedMatches(CreatedAt);
```

#### UserApproval
```sql
CREATE TABLE UserApprovals (
    Id INTEGER PRIMARY KEY,
    SessionId TEXT NOT NULL,
    BoqItemId TEXT NOT NULL,
    BoqItemName TEXT NOT NULL,
    SelectedCatalogueItemId TEXT NOT NULL,
    SelectedCatalogueItemName TEXT NOT NULL,
    BasePrice DECIMAL NOT NULL,
    Unit TEXT NOT NULL,
    MatchScore REAL NOT NULL,
    ApprovedAt DATETIME NOT NULL
);
CREATE INDEX IX_UserApproval_SessionId ON UserApprovals(SessionId);
CREATE INDEX IX_UserApproval_BoqItemId ON UserApprovals(BoqItemId);
```

#### SessionData
```sql
CREATE TABLE SessionData (
    Id INTEGER PRIMARY KEY,
    SessionId TEXT NOT NULL,
    SourceFileName TEXT NOT NULL,
    BoqDataJson TEXT NOT NULL,
    CreatedAt DATETIME NOT NULL,
    CompletedAt DATETIME
);
CREATE INDEX IX_SessionData_CreatedAt ON SessionData(CreatedAt);
```

## ğŸ”’ Security

- **Local-first**: Ğ’ÑĞ¸Ñ‡ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ğ¸ ÑĞµ ÑÑŠÑ…Ñ€Ğ°Ğ½ÑĞ²Ğ°Ñ‚ Ğ»Ğ¾ĞºĞ°Ğ»Ğ½Ğ¾
- **Input validation**: Comprehensive validation Ğ½Ğ° Ğ²ÑĞ¸Ñ‡ĞºĞ¸ Ğ²Ñ…Ğ¾Ğ´Ğ½Ğ¸ Ğ´Ğ°Ğ½Ğ½Ğ¸
- **File size limits**: 50MB Ğ·Ğ° Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²Ğµ, 100MB Ğ·Ğ° request body
- **Request timeouts**: 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚Ğ¸ default timeout
- **Error handling**: Global exception middleware Ğ±ĞµĞ· ĞµĞºÑĞ¿Ğ¾Ğ·Ğ¸Ñ€Ğ°Ğ½Ğµ Ğ½Ğ° sensitive Ğ´Ğ°Ğ½Ğ½Ğ¸

## ğŸ“¦ Deployment

### Desktop App Production Build

```bash
# Full automated build (backend + frontend + Electron)
cd desktop
./build-all.sh  # Linux/Mac
# or
build-all.bat   # Windows

# Output:
# - Windows: desktop/dist/FirstMake-Setup-2.0.0.exe (NSIS installer)
#            desktop/dist/FirstMake-2.0.0-win.zip (portable)
# - Linux:   desktop/dist/FirstMake-2.0.0.AppImage
#            desktop/dist/firstmake_2.0.0_amd64.deb

# Manual build steps:
# 1. Build backend
cd src/Api
dotnet publish -c Release -o ../../desktop/backend-build

# 2. Build frontend
cd ../UI
npm run build  # Output: dist/

# 3. Build Electron
cd ../../desktop
npm install
npm run build
```

### Web Deployment (Legacy)

```bash
# Backend
cd src/Api
dotnet publish -c Release -o ./publish

cd ../AiGateway
dotnet publish -c Release -o ./publish

# Frontend
cd ../UI
npm run build
# Output: dist/
```

### Docker Deployment

```bash
# Build images
docker-compose build

# Run in production mode
docker-compose -f docker-compose.prod.yml up -d
```

### System Requirements

#### Desktop App
- **OS**: Windows 10+ / Ubuntu 20.04+ / macOS 10.15+
- **CPU**: 2+ cores (LP optimization Ğµ CPU-intensive)
- **RAM**: 4GB minimum, 8GB recommended
- **Disk**: 500MB Ğ·Ğ° app + storage Ğ·Ğ° database
- **.NET Runtime**: Bundled (self-contained)

#### Web Mode (Development)
- **CPU**: 2+ cores
- **RAM**: 4GB minimum, 8GB recommended
- **Disk**: 1GB Ğ·Ğ° application + storage Ğ·Ğ° database
- **OS**: Linux, macOS, Windows (cross-platform)
- **.NET SDK**: 8.0+ required

## ğŸ¤ Contributing

Ğ’Ğ¸Ğ¶Ñ‚Ğµ [CONTRIBUTING.md](CONTRIBUTING.md) Ğ·Ğ° Ğ´ĞµÑ‚Ğ°Ğ¹Ğ»Ğ¸ ĞºĞ°Ğº Ğ´Ğ° Ğ´Ğ¾Ğ¿Ñ€Ğ¸Ğ½ĞµÑĞµÑ‚Ğµ ĞºÑŠĞ¼ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°.

### Development Workflow

1. Fork repository
2. Create feature branch (`git checkout -b feature/amazing-feature`)
3. Commit changes (`git commit -m 'Add amazing feature'`)
4. Push to branch (`git push origin feature/amazing-feature`)
5. Open Pull Request

## ğŸ“ License

Ğ¢Ğ¾Ğ·Ğ¸ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğµ Ğ»Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ€Ğ°Ğ½ Ğ¿Ğ¾Ğ´ MIT License - Ğ²Ğ¸Ğ¶Ñ‚Ğµ [LICENSE](LICENSE) Ñ„Ğ°Ğ¹Ğ»Ğ° Ğ·Ğ° Ğ´ĞµÑ‚Ğ°Ğ¹Ğ»Ğ¸.

## ğŸ‘¥ Authors

- **Blagoy Kozarev** - *Initial work* - [BlagoyKozarev](https://github.com/BlagoyKozarev)

## ğŸ™ Acknowledgments

- **Google OR-Tools** - LP optimization engine
- **EPPlus** - Excel file generation
- **iText7** - PDF text extraction
- **shadcn/ui** - UI component library
- **BG GPT** - Bulgarian LLM integration

## ï¿½ Performance

FirstMake Agent Ğµ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ°Ğ½ Ğ·Ğ° Ğ²Ğ¸ÑĞ¾ĞºĞ° Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»Ğ½Ğ¾ÑÑ‚:

- **API Response Times (P95)**:
  - Health check: < 10ms
  - Parse: < 500ms
  - Match: < 100ms
  - Optimize: < 500ms
  - Export: < 300ms

- **Throughput**: 50+ concurrent requests Ğ½Ğ° match endpoint
- **Memory**: < 500MB per service Ğ¿Ğ¾Ğ´ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ğ½Ğ¾ Ğ½Ğ°Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ²Ğ°Ğ½Ğµ
- **Resource Optimization**: Server GC, response caching, connection pooling

### Performance Testing

Ğ’Ğ³Ñ€Ğ°Ğ´ĞµĞ½ Ğµ Ğ¿ÑŠĞ»ĞµĞ½ suite Ğ¾Ñ‚ performance Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğµ:

```bash
# Run all performance tests
cd tests/Performance
./run-performance-tests.sh

# Individual benchmarks
dotnet run -c Release -- --filter "*FuzzyMatcher*"

# Load testing
k6 run load-tests/api-endpoints.js
```

Ğ—Ğ° Ğ´ĞµÑ‚Ğ°Ğ¹Ğ»Ğ¸ Ğ²Ğ¸Ğ¶Ñ‚Ğµ [Performance Testing Guide](docs/PERFORMANCE_TESTING.md).

## ğŸ–¥ï¸ Desktop App Architecture

FirstMake v2.0 Ğµ Ğ¿ÑŠĞ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ğ¾ **Electron desktop Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ** Ñ embedded backend.

### Features

- **Auto-Start Backend**: Electron Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ ÑÑ‚Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğ° .NET API Ğ¿Ñ€Ğ¸ Ğ¾Ñ‚Ğ²Ğ°Ñ€ÑĞ½Ğµ
- **System Tray**: Persistent background mode Ñ tray icon (click to show/hide)
- **Native Dialogs**: File picker Ñ‡Ñ€ĞµĞ· IPC bridge (selectFiles, selectFolder, saveFile)
- **Window State**: Saved position/size Ñ‡Ñ€ĞµĞ· electron-store
- **Logging**: Unified logs (main + renderer + backend) Ñ electron-log
- **Cross-Platform**: Windows (NSIS installer), Linux (AppImage, deb)

### Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Electron Main Process                  â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ startBackend â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚  .NET API Process    â”‚   â”‚
â”‚  â”‚              â”‚          â”‚  (port 5085)         â”‚   â”‚
â”‚  â”‚ â€¢ spawn()    â”‚          â”‚  â€¢ Auto-start        â”‚   â”‚
â”‚  â”‚ â€¢ monitor    â”‚          â”‚  â€¢ stdout logging    â”‚   â”‚
â”‚  â”‚ â€¢ SIGTERM    â”‚          â”‚  â€¢ SIGTERM on quit   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ System Tray  â”‚          â”‚  IPC Handlers        â”‚   â”‚
â”‚  â”‚ â€¢ Show/Hide  â”‚          â”‚  â€¢ selectFiles       â”‚   â”‚
â”‚  â”‚ â€¢ Exit       â”‚          â”‚  â€¢ selectFolder      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  â€¢ saveFile          â”‚   â”‚
â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Renderer Process (React UI)               â”‚
â”‚                                                         â”‚
â”‚  window.electron.selectFiles()  â”€â”€â”€â”€â”€â–¶  IPC Bridge    â”‚
â”‚  window.electron.getBackendStatus() â”€â”€â–¶  Preload      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Backend Lifecycle

**Development Mode:**
```bash
NODE_ENV=development npm start
# Backend: dotnet run --project ../src/Api/Api.csproj
# Frontend: http://localhost:5173 (Vite dev server)
```

**Production Mode:**
```bash
npm run build
# Backend: Bundled exe in resources/backend/
# Frontend: Bundled dist/ files
```

**Startup Sequence:**
1. Electron main process starts
2. `startBackend()` spawns .NET API
3. Monitors stdout for "Now listening on: http://localhost:5085"
4. Creates window after backend ready (or 10s timeout)
5. Loads React UI

**Shutdown Sequence:**
1. User clicks Exit or closes window
2. `stopBackend()` sends SIGTERM to API process
3. Electron waits for graceful shutdown
4. App exits

### Desktop-Specific APIs

React code Ğ¼Ğ¾Ğ¶Ğµ Ğ´Ğ° Ğ¸Ğ·Ğ¿Ğ¾Ğ»Ğ·Ğ²Ğ° desktop APIs Ñ‡Ñ€ĞµĞ· IPC bridge:

```typescript
// Check if running in Electron
if (window.electron?.isElectron) {
  // Select multiple files
  const files = await window.electron.selectFiles({
    filters: [{ name: 'Excel', extensions: ['xlsx'] }],
    properties: ['openFile', 'multiSelections']
  });

  // Select folder
  const folder = await window.electron.selectFolder();

  // Save file
  const path = await window.electron.saveFile({
    defaultPath: 'result.xlsx',
    filters: [{ name: 'Excel', extensions: ['xlsx'] }]
  });

  // Get backend status
  const status = await window.electron.getBackendStatus();
  // { running: true, port: 5085, pid: 12345 }
}
```

### Directory Structure

```
desktop/
â”œâ”€â”€ main.js              # Electron main process (260 lines)
â”œâ”€â”€ preload.js           # IPC bridge with context isolation
â”œâ”€â”€ package.json         # electron-builder config
â”œâ”€â”€ dev-start.sh         # Dev mode helper script
â”œâ”€â”€ build-all.sh         # Full build automation
â”œâ”€â”€ build-all.bat        # Windows build script
â”œâ”€â”€ README.md            # Desktop app documentation
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ icon.png         # App icon (512x512)
â”‚   â””â”€â”€ icon.ico         # Windows icon
â”œâ”€â”€ backend-build/       # Backend build output (ignored)
â”œâ”€â”€ dist/                # Electron build output (ignored)
â””â”€â”€ node_modules/        # Dependencies (ignored)
```

Ğ—Ğ° Ğ´ĞµÑ‚Ğ°Ğ¹Ğ»Ğ¸ Ğ²Ğ¸Ğ¶Ñ‚Ğµ [Desktop README](desktop/README.md).

## ï¿½ğŸ“š Additional Resources

- [User Manual (BG)](docs/USER_MANUAL.md) - ĞŸÑŠĞ»Ğ½Ğ¾ Ñ€ÑŠĞºĞ¾Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ğ·Ğ° Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ¸Ñ‚ĞµĞ»Ñ
- [Schemas Documentation](Schemas/README.md) - JSON schemas Ğ¸ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
- [API Reference](docs/API.md) - Comprehensive API documentation
- [Architecture Guide](docs/ARCHITECTURE.md) - Technical architecture details
- [Deployment Guide](docs/DEPLOYMENT.md) - Production deployment instructions
- [Performance Testing](docs/PERFORMANCE_TESTING.md) - Benchmarking and load testing
- [Release Notes](RELEASE_NOTES.md) - v1.0.0 release information

---

**Built with â¤ï¸ for the Bulgarian construction industry**
